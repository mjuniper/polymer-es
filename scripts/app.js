!function(a){"use strict";function b(){m=new esri.layers.GraphicsLayer,map.addLayer(m),g(),a.querySelector("esri-search").addEventListener("esri:search:complete",i),a.querySelector("esri-search-results").addEventListener("esri:search-result:item-clicked",f),a.querySelector("esri-search-results").addEventListener("esri:search-result:item-mouseover",d),a.querySelector("esri-search-results").addEventListener("esri:search-result:item-mouseout",e)}function c(a){var b;return m.graphics.every(function(c){return a==c.attributes.id?(b=c,!1):!0}),b}function d(a){var b=c(a.detail.id);if(b){var d=new esri.Graphic(b.geometry,l,b.attributes);map.graphics.add(d),console.debug("added hilight graphic: "+b.attributes.id),console.debug(null!=map.extent.intersects(b.geometry))}}function e(){map.graphics.clear()}function f(a){console.debug("in zoomToExtent");var b=c(a.detail.id);b&&(b._extent&&console.debug("graphic has extent"),map.setExtent(b._extent,!0))}function g(){a.querySelector("esri-search").extent=esri.geometry.webMercatorToGeographic(map.extent)}function h(){m.clear()}function i(a){j(a.detail)}function j(a){m.clear();var b,c,d;a.hits&&a.hits.forEach(function(a){b=new esri.geometry.Extent({xmin:a._source.min_x,ymin:a._source.min_y,xmax:a._source.max_x,ymax:a._source.max_y,spatialReference:{wkid:4326}}),c=esri.geometry.geographicToWebMercator(b),d=new esri.Graphic(c,k,a._source),m.add(d)})}var k,l,m,n;dojo.addOnLoad(function(){window.map=new esri.Map("map",{center:[-56.049,38.485],zoom:3,basemap:"gray"}),map.on("load",b),map.on("pan-start",h),map.on("zoom-start",h),map.on("pan-end",g),map.on("zoom-end",g),k=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,255,255]),1),new dojo.Color([93,173,221,.1])),l=esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,255,255]),2),new dojo.Color([93,173,221])),n=new esri.InfoTemplate("${title}","${*}")})}(wrap(document));